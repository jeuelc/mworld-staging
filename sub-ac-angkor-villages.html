<!-- i-C-a -->
<div id="angkorvillage" data-role="page">
  <script src="js/slidebarac.js"></script>
  <div class="menuhousing"></div>
  <div class="homebtnholder"><div class="homebtnac"></div></div>
  <div class="mpbtnholder"><div class="mpbtnac"></div></div>
  <div class="cpbtnholder"><div class="cpbtnac"></div></div>
  <div class="infobtnholder"><div class="infobtnac"></div></div>
  <div class="credsbtnholder"><div class="credsbtnac"></div></div>
  <div class="menubtnholder"><div class="menubtnac"></div></div>
    <div class="bptitleholder" style="padding-top:14px;"><h1>Villages, rice fields and forests</h1></div>
    <div id="anisold">
        <div id="spacechar">&nbsp;
            <div data-role="content" class="kidzcontent">
                <div class="v-volcano"></div>
                  <div class="sidebarleft-half">
                     <div id="zoomwrapper">
                        <div id="pol1" class="pPiece" style="left:100px;top:270px;">
                           <img src="css/images/9-12/Ancient_Civilizations/Angkor/Daily_Life_In_Angkor/wmricefieldpol.png" alt="" />
                        </div>
                     </div><!--/zoomwrapper-->
                
                </div>
                <div class="bpcontentangkor">
                    <p>Since ancient times, the Khmer people preferred to live in woodland clearings and near forest streams. Their civilisation grew up with trees, and despite the thousands of rice fields that surrounded the capital, the forests were never far away... Wild animals were as much a part of village life as farm animals were! The names of places in ancient inscriptions suggest there were all kinds of animals, from pythons and bees, to wild boar and buffalo.  </p>
                    <p>Water was essential, especially for growing rice, so villages mostly clustered along rivers and lakeshores. If a village was far from a river, they would be sure to dig a reservoir, called today a beng, and, closer to the houses, they would dig lots of small ponds called trapeang. Several families would all share the water for drinking and bathing.</p>
                </div>
                <div class="botlogoholder"><a href="home.html" class="homelinkbh"><img src="css/images/9-12/Ancient_Civilizations/bottomhomeac.png"></a></div>
            </div><!--end of content-->
        </div>
    </div><!--/anisold-->
     
    <div class="micbtnholder"><div class="micbtnac" id="playstopangkorvillage"></div></div>
    <div class="bac"><div class="rwac" id="angkorvillageaudiobbtn"></div></div>
    <div class="plac"><div class="plpsac" id="angkorvillageaudioplbtn"></div></div>
    <div class="fac"><div class="fwac" id="angkorvillageaudiofbtn" ></div></div>
    <div id="actualaudio-angkorvillage" style="visibility:hidden;"></div>
    
    <div id="ricevideoholder" style="width:1024px;height:748px;position:absolute;left:0px;top:0px;visibility:hidden;background:#000000;z-index:-1;">
      <video id="ricevideo" width="1024" height="748" preload>
        <source src="video/ricevideo.mp4" type="video/mp4">
      </video>
    </div>
    
    <script>
        sound = new Audio();
        soundpop = new Audio();
        var playing;
        (function() {
          playing = false;
            $('div#pol1 > img').css("-webkit-transform", "rotate(0deg)");
            $('div#pol1').css("z-index", 2);
            $('div#pol2').css("z-index", 1);
            $('div#pol2 > img').css("-webkit-transform", "rotate(5deg)");
            $('div#pol3 > img').css("-webkit-transform", "rotate(-5deg)");
           
           
             if(sound.canPlayType('audio/mpeg')) {
                 $('#actualaudio-angkorvillage').html('<audio controls preload id="angkorvillageaudio" onpause="playangkor()" onplay="pauseangkor()"><source src="narrations/angkor_villages.mp3" type="audio/mpeg"></audio>');
             } 
             
    
            $("#angkorvillage").swipe( { swipeRight:goBack, allowPageScroll:"auto"} );
            
            ricevideo.addEventListener('ended', function() { 
              $("#ricevideoholder").css({"visibility":"hidden", "z-index":-1});
              $("#ricevideo").css({"z-index":-1});
              angkorbg.play(); 
            });
    
        })();
        $('.homelinkbh').on('tap', function() { mainaudiobg.play(); bgsoundbh.pause(); bgsoundbh.currentTime = 0;});
    
        function goBack() {
            $.mobile.changePage("sub-ac-angkor-dailylife.html", {transition: "slide", reverse: true });
        }
        
       function pauseangkor() {
          angkorbg.pause();
        }
        
        function playangkor() {
          angkorbg.play();
        }
       
    $("#pol1").on('tap', function() {
      $("#ricevideoholder").css({"visibility":"visible", "z-index":10});
      $("#ricevideo").css({"z-index":9});
      angkorbg.pause();
      ricevideo.play();
    });
    
    $("#ricevideo").on('tap', function() {
      $("#ricevideoholder").css({"visibility":"hidden", "z-index":-1});
      $("#ricevideo").css({"z-index":-1});
      angkorbg.play();
      ricevideo.pause();
      ricevideo.currentTime = 0;
    }); 

/* ******************** */
    $("#playstopangkorvillage").on('tap', function() {
      if(!playing) {
        angkorvillageaudio.play();
        $('.micbtnac').css('background-position-x', '-81px');
        playing = true;
        paused = false;
      } else {
        angkorvillageaudio.pause(); angkorvillageaudio.currentTime = 0;
        $('.micbtnac').css('background-position-x', '0px');
        playing = false;
        paused = true;
      }
    });
    
    $("#angkorvillageaudioplbtn").on('tap', function() {
      if(!paused) {
        angkorvillageaudio.pause();
        paused = true;
      } else {
        angkorvillageaudio.play();
        paused = false;
      }
    });
    
    $("#angkorvillageaudiofbtn").on('tap', function() {
      var ctime = angkorvillageaudio.currentTime;
      angkorvillageaudio.currentTime = ctime + 10;
    });
    
    $("#angkorvillageaudiobbtn").on('tap', function() {
      var ctime = angkorvillageaudio.currentTime;
      angkorvillageaudio.currentTime = ctime - 10;
    });      
                
  </script>
</div>
